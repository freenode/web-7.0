<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta name="theme-color" content="#292f2f">
    <meta name="description" content="freenode IRC network">
    <link rel="icon" href="../../static/img/logos/coloured-alphabg-sq-120.png">
    <link rel="alternate" type="application/rss+xml" href="../../news/rss.xml" title="news (rss)">
    <link rel="alternate" type="application/atom+xml" href="../../news/atom.xml" title="news (atom)">
    <title>CertFP - freenode</title>
    <link href="../../static/css/open-sans.css?c55a1b7" rel="stylesheet">
    <link href="../../static/css/font-awesome.css?c55a1b7" rel="stylesheet">
    <link href="../../static/css/style.css?c55a1b7" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <a id="nav-jump" class="invisible" href="#navigation">Jump to navigation</a>
        <a id="nav-logo" href="../.."><img alt="freenode" class="nlogo" src="../../static/img/logos/coloured-alphabg.svg "></a>
        <a id="nav-pia" href="https://www.privateinternetaccess.com/pages/buy-vpn/freend/" target="_blank"><img alt="Private Internet Access" class="nlogo" src="../../static/img/logos/PIALogo_white.svg"></a>
        <form id="nav-search" action="https://www.google.com/cse">
            <input type="hidden" name="cx" value="partner-pub-3720690829065633:9p8fr4-u91g">
            <input type="hidden" name="ie" value="ISO-8859-1">
            <label for="search" class="invisible">Query:</label>
            <input id="nav-searchbox" type="text" name="q" placeholder="Search using Google">
            <label id="nav-label" for="nav-searchbox"><i class="fa fa-search fa-lg"></i></label>
            <input id="nav-submit" type="submit" class="invisible" value="Search using Google">
        </form>
    </nav>
    <div class="container">
        
<div class="main">
    <h1>CertFP</h1>
    <p class="art-ingress">
        <p>As an alternative to password-based authentication, you can connect to freenode
with a TLS certificate and have services recognise it automatically.</p>
<h2 id="creating-a-self-signed-certificate">Creating a self-signed certificate</h2>
<p>In order to follow these instructions, you will need the <code>openssl</code> utility. If
you are using Windows and do not have a copy, you might consider using Cygwin.</p>
<p>You can generate a certificate with the following command:</p>
<pre><code>openssl req -x509 -new -newkey rsa:4096 -sha256 -days 1000 -nodes -out freenode.pem -keyout freenode.pem
</code></pre>
<p>You will be prompted for various pieces of information about the certificate.
The contents do not matter for our purposes, but <code>openssl</code> needs at least one of
them to be non-empty.</p>
<p>The <code>.pem</code> file will have the same access to your NickServ account as your
password does, so take appropriate care in securing it.</p>
<p>Under Unix-like environments, the following command:</p>
<pre><code>openssl x509 -in freenode.pem -outform der | sha1sum -b | cut -d' ' -f1
</code></pre>
<p>will list the certificate fingerprint.</p>
<h2 id="connecting-to-freenode-with-your-certificate">Connecting to freenode with your certificate</h2>
<p>IRC clients generally differ in where they look for a certificate and how you
configure them to offer it to the server. If yours is not yet listed here,
advice in this section is unlikely to apply, but guides may be available
elsewhere on the web.</p>
<h3 id="irssi">irssi</h3>
<p>Move the certificates you created above to ~/.irssi/certs</p>
<pre><code>mkdir ~/.irssi/certs
mv freenode.pem ~/.irssi/certs
</code></pre>
<p>Now configure your <code>/server</code> entry for freenode to use this certificate. You
may need to adapt this example for your existing configuration (the network
and hostname should match what you already use).</p>
<pre><code>/server add -auto -ssl -ssl_cert ~/.irssi/certs/freenode.pem -network freenode chat.freenode.net 6697
</code></pre>
<h3 id="weechat">weechat</h3>
<p>Move the certificates you created above to ~/.weechat/certs</p>
<pre><code>mkdir ~/.weechat/certs
mv freenode.pem ~/.weechat/certs
</code></pre>
<p>Now disconnect and remove the current freenode server(s). Re-add it with the
SSL flag, using your newly generated certificate. Note that these commands are
just examples, you have to adapt them to your current servers.</p>
<pre><code>/set irc.server.freenode.addresses chat.freenode.net/6697
/set irc.server.freenode.ssl on
/set irc.server.freenode.ssl_verify on
/set irc.server.freenode.ssl_cert %h/certs/freenode.pem
/set irc.server.freenode.sasl_mechanism external
</code></pre>
<p>and then reconnect to freenode.</p>
<h3 id="znc">znc</h3>
<p>Refer to znc's <a href="http://wiki.znc.in/Cert">official documentation</a>.</p>
<h3 id="hexchat">HexChat</h3>
<p>The pem file should be placed in <code>certs/network name.pem</code> in the HexChat config
directory (<code>~/.config/hexchat/</code> or <code>%appdata%\HexChat</code>), where <code>network name</code>
is the name of the network as it appears in the network list (Ctrl-S). Note
that the <code>certs</code> directory does not exist by default and you will have to
create it yourself. Once the file is there, all subsequent SSL connections to
that network will use the certificate.</p>
<h2 id="add-your-fingerprint-to-nickserv">Add your fingerprint to NickServ</h2>
<p>You can then check whether you have a fingerprint by using <code>whois</code> on yourself:</p>
<pre><code>/whois YourOwnNick
...
YourOwnNick has client certificate fingerprint f3a1aad46ca88e180c25c9c7021a4b3a
...
</code></pre>
<p>To allow NickServ to recognise you based on your certificate, you need to add
the fingerprint to your account (you will need to log in by other means in order
to do so).</p>
<p>You can then authorise your current certificate fingerprint:</p>
<pre><code>/msg NickServ CERT ADD
</code></pre>
<p>In the future, any connections you make to freenode with your certificate will
be logged into your account automatically. Optionally, or if you wish to connect
via Tor, you can enable SASL with the <code>EXTERNAL</code> mechanism.</p>
    </p>
</div>

    </div>
    <div class="footers">
        <a id="navigation"></a>
        <footer class="footer">
    <div class="footer-container">
    
    <div class="footerchild">
        <h2>About freenode</h2>
        <ul>
            
            <li>
                <a href="../../project">The project</a>
            </li>
            <li>
                <a href="../../people">The people</a>
            </li>
            <li>
                <a href="../../philosophy">The philosophy</a>
            </li>
            <li>
                <a href="../../policies">The policies</a>
            </li>
            <li>
                <a href="../../live">freenode live!</a>
            </li>
            <li>
                <a href="../../acknowledgements">Acknowledgements</a>
            </li>
            <li>
                
                
                    <a href="../../archive">News Archive</a>
                
                
                
                    /
                
                
                
                    <a href="../../news/rss.xml">RSS</a>
                
                
                
                    /
                
                
                
                    <a href="../../news/atom.xml">Atom</a>
                
                
            </li>
        </ul>
    </div>
    
    <div class="footerchild">
        <h2>Using freenode</h2>
        <ul>
            
            <li>
                <a href="//webchat.freenode.net">Webchat</a>
            </li>
            <li>
                
                
                    <a href="ircs://chat.freenode.net:6697">chat.freenode.net:6697</a>
                
                
                
                    /
                
                
                
                    <a href="irc://chat.freenode.net:6667">non-SSL: 6667</a>
                
                
            </li>
            <li>
                <a href="../../changuide">Channel guidelines</a>
            </li>
            <li>
                <a href="../../catalysts">Catalyst guidelines</a>
            </li>
            <li>
                <a href="../all">Knowledge base</a>
            </li>
            <li>
                <a href="../../support">Supporting the project</a>
            </li>
            <li>
                <a href="../../groupreg">Group registration</a>
            </li>
            <li>
                <a href="../../groupreg">Existing groups</a>
            </li>
        </ul>
    </div>
    
    <div></div>
    <div class="footerchild">
        <div class="footer-push">
        <h2>Social Media</h2>
        <ul>
            <li>
                <a href="https://google.com/+freenode" target="_blank">
                    <i class="fa fa-google-plus fa-fw"></i> <span class="hdn">Google+</span></a>
            </li>
            <li>
                <a href="https://twitter.com/freenodestaff" target="_blank">
                    <i class="fa fa-twitter fa-fw"></i> <span class="hdn">Twitter</span></a>
            </li>
            <li>
                <a href="https://www.facebook.com/freenode-366911233325305/" target="_blank">
                    <i class="fa fa-facebook fa-fw"></i> <span class="hdn">Facebook</span></a>
            </li>
            <li>
                <a href="https://www.privateinternetaccess.com/pages/buy-vpn/freend/" target="_blank">
                    <img alt="PIA" class="fa-fw" src="../../static/img/logos/pia-robot-original.svg">
                <span class="hdn">Private Internet Access</span></a>
            </li>
        </ul>
        </div>
    </div>
    </div>
</footer>
<footer class="copyright">
    <div>
    <a href="https://github.com/freenode/web-7.0"><i class="fa fa-github fa-lg"></i></a>&nbsp;
    <a class="copyright" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target= "_blank">
        <img alt="CC by-nc-sa" src="../../static/img/by-nc-sa.svg">
    </a>
    </div>
    <div>
        &copy; 2016, freenode
    </div>
</footer>
    </div>
</body>
</html>