<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta name="theme-color" content="#292f2f">
    <meta name="description" content="freenode IRC network">
    <link rel="icon" href="../../static/img/logos/coloured-alphabg-sq-120.png">
    <link rel="alternate" type="application/rss+xml" href="../../news/rss.xml" title="news (rss)">
    <link rel="alternate" type="application/atom+xml" href="../../news/atom.xml" title="news (atom)">
    <title>CertFP - freenode</title>
    <link href="../../static/css/open-sans.css?72b0d15" rel="stylesheet">
    <link href="../../static/css/font-awesome.css?72b0d15" rel="stylesheet">
    <link href="../../static/css/style.css?72b0d15" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <a id="nav-jump" class="invisible" href="#navigation">Jump to navigation</a>
        <a id="nav-logo" href="../.."><img alt="freenode" class="nlogo" src="../../static/img/logos/coloured-alphabg.svg "></a>
        <a id="nav-pia" href="https://www.privateinternetaccess.com/pages/buy-vpn/freend/" target="_blank"><img alt="Private Internet Access" class="nlogo" src="../../static/img/logos/PIALogo_white.svg"></a>
        <form id="nav-search" action="https://www.google.com/cse">
            <input type="hidden" name="cx" value="partner-pub-3720690829065633:9p8fr4-u91g">
            <input type="hidden" name="ie" value="ISO-8859-1">
            <label for="search" class="invisible">Query:</label>
            <input id="nav-searchbox" type="text" name="q" placeholder="Search using Google">
            <label id="nav-label" for="nav-searchbox"><i class="fa fa-search fa-lg"></i></label>
            <input id="nav-submit" type="submit" class="invisible" value="Search using Google">
        </form>
    </nav>
    <div class="container">
        
<div class="main">
    <h1>CertFP</h1>
    <p class="art-ingress">
        <p>As an al­ter­na­tive to pass­word-based au­then­ti­ca­tion, you can con­nect to freen­ode
with a TLS cer­tifi­cate and have ser­vices recog­nise it au­to­mat­i­cal­ly.</p>
<h2 id="creating-a-self-signed-certificate">Creating a self-signed certificate</h2>
<p>In or­der to fol­low these in­struc­tions, you will need the <code>openssl</code> util­i­ty. If
you are us­ing Win­dows and do not have a copy, you might con­sid­er us­ing Cyg­win.</p>
<p>You can gen­er­ate a cer­tifi­cate with the fol­low­ing com­mand:</p>
<pre><code>openssl req -x509 -new -newkey rsa:4096 -sha256 -days 1000 -nodes -out freenode.pem -keyout freenode.pem
</code></pre>
<p>You will be prompt­ed for var­i­ous pieces of in­for­ma­tion about the cer­tifi­cate.
The con­tents do not mat­ter for our pur­pos­es, but <code>openssl</code> needs at least one of
them to be non-emp­ty.</p>
<p>The <code>.pem</code> file will have the same ac­cess to your Nick­Serv ac­count as your
pass­word does, so take ap­pro­pri­ate care in se­cur­ing it.</p>
<p>Un­der Unix-­like en­vi­ron­ments, the fol­low­ing com­mand:</p>
<pre><code>openssl x509 -in freenode.pem -outform der | sha1sum -b | cut -d' ' -f1
</code></pre>
<p>will list the cer­tifi­cate fin­ger­print.</p>
<h2 id="connecting-to-freenode-with-your-certificate">Connecting to freenode with your certificate</h2>
<p>IRC clients gen­er­al­ly dif­fer in where they look for a cer­tifi­cate and how you
con­fig­ure them to of­fer it to the serv­er. If yours is not yet list­ed here,
ad­vice in this sec­tion is un­like­ly to ap­ply, but guides may be avail­able
else­where on the web.</p>
<h3 id="irssi">irssi</h3>
<p>Move the cer­tifi­cates you cre­at­ed above to ~/.irssi/certs</p>
<pre><code>mkdir ~/.irssi/certs
mv freenode.pem ~/.irssi/certs
</code></pre>
<p>Now con­fig­ure your <code>/server</code> en­try for freen­ode to use this cer­tifi­cate. You
may need to adapt this ex­am­ple for your ex­ist­ing con­fig­u­ra­tion (the net­work
and host­name should match what you al­ready use).</p>
<pre><code>/server add -auto -ssl -ssl_cert ~/.irssi/certs/freenode.pem -network freenode chat.freenode.net 6697
</code></pre>
<h3 id="weechat">weechat</h3>
<p>Move the cer­tifi­cates you cre­at­ed above to ~/.weechat/certs</p>
<pre><code>mkdir ~/.weechat/certs
mv nick.pem ~/.weechat/certs
</code></pre>
<p>Now dis­con­nect and re­move the cur­rent freen­ode serv­er(s). Re-add it with the
SSL flag, us­ing your new­ly gen­er­at­ed cer­tifi­cate. Note that these com­mands are
just ex­am­ples, you have to adapt them to your cur­rent servers.</p>
<pre><code>/set irc.server.freenode.addresses chat.freenode.net/6697
/set irc.server.freenode.ssl on
/set irc.server.freenode.ssl_verify on
/set irc.server.freenode.ssl_cert %h/certs/nick.pem
/set irc.server.freenode.sasl_mechanism external
</code></pre>
<p>and then re­con­nect to freen­ode.</p>
<h3 id="znc">znc</h3>
<p>Re­fer to znc's <a href="http://wiki.znc.in/Cert">of­fi­cial doc­u­men­ta­tion</a>.</p>
<h2 id="add-your-fingerprint-to-nickserv">Add your fingerprint to NickServ</h2>
<p>You can then check whether you have a fin­ger­print by us­ing <code>whois</code> on your­self:</p>
<pre><code>/whois YourOwnNick
...
YourOwnNick has client certificate fingerprint f3a1aad46ca88e180c25c9c7021a4b3a
...
</code></pre>
<p>To al­low Nick­Serv to recog­nise you based on your cer­tifi­cate, you need to add
the fin­ger­print to your ac­count (you will need to log in by oth­er means in or­der
to do so).</p>
<p>You can then au­tho­rise your cur­rent cer­tifi­cate fin­ger­print:</p>
<pre><code>/msg NickServ CERT ADD
</code></pre>
<p>In the fu­ture, any con­nec­tions you make to freen­ode with your cer­tifi­cate will
be logged into your ac­count au­to­mat­i­cal­ly. Op­tion­al­ly, or if you wish to con­nect
via Tor, you can en­able SASL with the <code>EXTERNAL</code> mech­a­nism.</p>
    </p>
</div>

    </div>
    <div class="footers">
        <a id="navigation"></a>
        <footer class="footer">
    <div class="footer-container">
    
    <div class="footerchild">
        <h2>About freenode</h2>
        <ul>
            
            <li>
                <a href="../../project">The project</a>
            </li>
            <li>
                <a href="../../people">The people</a>
            </li>
            <li>
                <a href="../../philosophy">The philosophy</a>
            </li>
            <li>
                <a href="../../policies">The policies</a>
            </li>
            <li>
                <a href="../../live">freenode live!</a>
            </li>
            <li>
                <a href="../../acknowledgements">Acknowledgements</a>
            </li>
            <li>
                
                
                    <a href="../../archive">News archive</a>
                
                
                
                    (
                
                
                
                    <a href="../../news/rss.xml">rss</a>
                
                
                
                    /
                
                
                
                    <a href="../../news/atom.xml">atom</a>
                
                
                
                    )
                
                
            </li>
        </ul>
    </div>
    
    <div class="footerchild">
        <h2>Using freenode</h2>
        <ul>
            
            <li>
                <a href="//webchat.freenode.net">Webchat</a>
            </li>
            <li>
                
                
                    <a href="ircs://chat.freenode.net:6697">chat.freenode.net:6697</a>
                
                
                
                    /
                
                
                
                    <a href="irc://chat.freenode.net:6667">non-SSL: 6667</a>
                
                
            </li>
            <li>
                <a href="../../changuide">Channel guidelines</a>
            </li>
            <li>
                <a href="../../catalysts">Catalyst guidelines</a>
            </li>
            <li>
                <a href="../all">Knowledge base</a>
            </li>
            <li>
                <a href="../../support">Supporting the project</a>
            </li>
            <li>
                <a href="../../groupreg">Group registration</a>
            </li>
            <li>
                <a href="../../groupreg">Existing groups</a>
            </li>
        </ul>
    </div>
    
    <div></div>
    <div class="footerchild">
        <div class="footer-push">
        <h2>Social Media</h2>
        <ul>
            <li>
                <a href="https://google.com/+freenode" target="_blank">
                    <i class="fa fa-google-plus fa-fw"></i> <span class="hdn">Google+</span></a>
            </li>
            <li>
                <a href="https://twitter.com/freenodestaff" target="_blank">
                    <i class="fa fa-twitter fa-fw"></i> <span class="hdn">Twitter</span></a>
            </li>
            <li>
                <a href="https://www.facebook.com/freenode-366911233325305/" target="_blank">
                    <i class="fa fa-facebook fa-fw"></i> <span class="hdn">Facebook</span></a>
            </li>
            <li>
                <a href="https://www.privateinternetaccess.com/pages/buy-vpn/freend/" target="_blank">
                    <img alt="PIA" class="fa-fw" src="../../static/img/logos/pia-robot-original.svg">
                <span class="hdn">Private Internet Access</span></a>
            </li>
        </ul>
        </div>
    </div>
    </div>
</footer>
<footer class="copyright">
    <div>
    <a href="https://github.com/freenode/web-7.0"><i class="fa fa-github fa-lg"></i></a>&nbsp;
    <a class="copyright" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target= "_blank">
        <img alt="CC by-nc-sa" src="../../static/img/by-nc-sa.svg">
    </a>
    </div>
    <div>
        &copy; 2016, freenode
    </div>
</footer>
    </div>
</body>
</html>